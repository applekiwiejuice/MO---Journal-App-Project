<%= image_tag ('mo_task.png'), class: "img-25" %>
<h1>Categories <i class="fas fa-angle-right"></i> <%=@category.category_name%></h1>
<%# <p>MOâ„¢ Tasks</p> %>
<%= link_to ' ', categories_path(current_user.id), class: "far fa-arrow-alt-circle-left btn btn-lg btn-light" %>
<%= link_to ' Task', new_category_task_path, class: "fas fa-plus btn btn-lg btn-light" %>
<hr />
<div class="container">
<div class="row mb-3">
    <% @tasks.each do |task| %>
    
    <div class="col-sm-12 col-lg-6">
    <% if task.task_done == true %>
    <div class="card text-white bg-dark border-success mb-4">
      <% else %>
    <div class="card text-white bg-dark mb-4 box-shadow">
    <% end %>
        <div class="card-body">
        <h5 class="card-title"><%= task.task_name %></h5>
        <h6 class="card-subtitle mb-2 text-muted small-warning"><%= task.created_at.to_formatted_s(:long) %></h6>
        <p class="card-text mb-2"><%= task.task_description %></p>
        <hr />
        <div class="row d-inline">

        <%= link_to 'Edit', edit_category_task_path(:id => task.id), class: "card-link btn btn-light btn-sm" %>
        <%= link_to 'Delete', category_task_path(:id => task.id), method: :delete, data: { confirm: 'Are you sure?' }, class: "card-link btn btn-danger btn-sm"%>
        </div>

        <div class="row d-inline">

        <% if task.task_done == true %>
          <%= button_to "Undone", category_task_path(:id => task.id),   
          params: {:task => { :id => task.id, :task_done => false, :user_id => current_user.id }}, 
          method: :put, class: "mt-3 card-link btn btn-outline-light btn-sm" %>
          <hr />
          <p class="card-text text-success">Task done!</p>
          <% else %>
          <%= button_to "Mark as done", category_task_path(:id => task.id),   
          params: {:task => { :id => task.id, :task_done => true, :user_id => current_user.id }}, 
          method: :put, data: { confirm: 'Are you sure?' }, class: "mt-3 card-link btn btn-success btn-sm" %>
          <hr />
          <p class="card-text text-muted">Deadline: <%= task.task_deadline.to_formatted_s(:long) %></p>
        <% end %>

        </div>
        
      </div>
    </div>
</div>
    <% end %>

</div>
</div>

<%= link_to ' Back', categories_path(current_user.id), class: "far fa-arrow-alt-circle-left" %>